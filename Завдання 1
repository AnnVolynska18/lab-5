#include <iostream>
#include <cmath>
#include <iomanip>

using namespace std;

void task1_sequence_sum_v2() {
    cout << "--- Завдання 1: Сума послідовності (an = sin(1/n)) ---\n";

    // 1. Ініціалізація констант та змінних
    const double EPSILON = 0.001; // Точність E
    double sum = 0.0;             // Змінна для накопичення суми
    double an;                    // Поточний член послідовності
    int n = 1;                    // Початковий індекс n = 1

    cout << "Умова зупинки: |an| < " << EPSILON << endl;

    // 2. Цикл while: продовжуємо, доки модуль члена послідовності >= Epsilon
    do {
        // Обчислення n-го члена послідовності: an = sin(1/n)
        an = sin(1.0 / n);

        // Перевірка умови: якщо |an| < Epsilon, виходимо з циклу
        if (abs(an) < EPSILON) {
            break;
        }

        // Додавання члена до суми
        sum += an;

        // Виведення поточного члена та суми (для контролю)
        cout << fixed << setprecision(6);
        cout << "n=" << n << ": an = " << an << " | Sum = " << sum << endl;

        // Перехід до наступного члена
        n++;

    } while (true); // Цикл працює нескінченно, доки не спрацює break

    // Виведення кінцевого результату
    cout << "\n------------------------------------------\n";
    cout << "Кількість доданих членів: " << n - 1 << endl;
    cout << fixed << setprecision(8);
    cout << "Остаточна сума S = " << sum << endl;
    cout << "------------------------------------------\n";
}
